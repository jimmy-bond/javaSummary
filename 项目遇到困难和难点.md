消息队列引入后的消息处理幂等器的实现

消息队列幂等处理器的一个实现，我查看网上的文章时对于消息的状态定义只有消费过而没有完成状态，所以我给消息的id在redis中添加一个值，可以更好的区分消息是否有真正的完成消费，来判断是否要重试这个消息

java的stream流和Lambda 表达式的书写

中间件的配置问题，rocketmq版本与springboot版本不适配，将rocketmq版本降级

meavn引入的包不生效

跳转短链接时的缓存击穿和穿透的问题

慢sql问题：分别多次插入 不如 一批多次插入的效率快，用mybatis语句

~~~java
public interface ShortLinkMapper {
    // 批量插入短链接数据
    @Insert("<script> " +
            "INSERT INTO short_link_table (domain, origin_url, gid, created_type, valid_date_type, valid_date, describe, short_uri, enable_status, total_pv, total_uv, total_uip, del_time, full_short_url, favicon) " +
            "VALUES " +
            "<foreach collection='list' item='item' separator=','> " +
            "  (#{item.domain}, #{item.originUrl}, #{item.gid}, #{item.createdType}, #{item.validDateType}, #{item.validDate}, #{item.describe}, #{item.shortUri}, #{item.enableStatus}, #{item.totalPv}, #{item.totalUv}, #{item.totalUip}, #{item.delTime}, #{item.fullShortUrl}, #{item.favicon}) " +
            "</foreach> " +
            "</script>")
    void batchInsert(List<ShortLinkDO> shortLinkDOList);
}
~~~

有一个读写锁的问题，本来我用消息队列存储了一条监控短链接的数据，本来我消息队列消费消息是没有加锁的，然后我这时修改了短链接的分组信息，然后数据库的插入信息就全都是错的，然后我就断点debug，解决方案是不再传入特定的参数去查询而是动态去获取