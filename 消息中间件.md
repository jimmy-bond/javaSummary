### **消息中间件是什么?使用它有什么作用?**

**消息中间件则是将软件与软件之间的交互方式进行存储和管理的一种技术,也可以看做是一种容器。**

消息队列是消息中间件的一种实现方式

作用：

**1、异步处理,提高响应速度**

![img](https://pic4.zhimg.com/80/v2-df1ec81c2bcd47812ec691114e1c5a03_720w.webp)

2、**应用解耦**

![img](https://pic1.zhimg.com/80/v2-98517be1ca806900e20e34206fa85100_720w.webp)

3、**流量削峰:**

设置消息队列容量，避免同时大量请求到达服务器数据库造成压力

![img](https://pic2.zhimg.com/80/v2-a4c062a9e3930db16a59759a63316169_720w.webp)

RabbitMQ可以实现跨平台语言实现，并且提供五种消息模型

## RabbitMQ核心内容

**1、消息代理(message broker): 负责接受消息生产者发送的消息**
**2、目的地(destination):消息最终被消费的地方**

当消息发送者发送消息以后,将由消息代理接管,消息代理保证消息传递到指定的目的地。

###  **从消息代理到目的地的方式**

**1、队列: 点对点的通信(point - to - point):** 消息发送者发送消息,消息代理将其放入到一个队列中，消息接收者从队列中获取消息内容,消息读取后被移除出队列。

![img](https://pic3.zhimg.com/80/v2-10bac291d346f35fc7e9cc3c742ad6c6_720w.webp)



**2、主题: 发布publish/订阅subscribe 消息通信:** 发布者发送消息到主题，多个接收者(订阅者)订阅这个主题,那么就会在消息到达时同时收到消息

![img](https://pic3.zhimg.com/80/v2-f77beda076530d62668b2d65071e612e_720w.webp)

#### RabbitMQ核心概念

**3、Exchange(交换器):** 用来接受消息并且消息路由给服务器中的队列,有四种类型,即决定消息发布到那个队列,具体有以下的类型:
(1)、Direct：消息中的路由键(routingkey)，如果和Binding中的binding key 一致,那么就将消息发到对应的队列中。
(2)、Fanout类型: 即广播模式,每个发送到fanout类型的交换器消息，交换器会将消息发送到它绑定的所有队列中,它转发消息是最快的。
(3)、Topic：主题,可以设置模糊匹配,会识别"#"和"*"号,#表示匹配0个或者多个单词,*匹配一个单词,单词之间使用:逗号隔开。

**Binding(绑定):** 用于消息队列和交换器之间的关联,一个绑定就是基于路由键将交换机和消息队列连接起来的路由规则,交换器跟队列的绑定可以是多对多的关系。

**6、Connection(网络连接):** 如一个Tcp连接。


**7、Channel(信道):** 多路复用连接中的一条独立的双向数据流通道,信道是建立在真实的TCP连接内的虚拟通道,AMQP命令都是通过信道发出去的,不管是发布消息,订阅队列,还是接收消息，都是通过信道完成,因为对于操作系统来说创建和销毁一个TCP连接都是很昂贵的开销,所以使用信道以实现复用一条TCP连接

![img](https://pic2.zhimg.com/80/v2-8448dae55eac7c0ee287820903bdd11d_720w.webp)